<!DOCTYPE HTML>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>autosetup - News</title>
    <link rel="stylesheet" type="text/css" href="../css/style.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../css/sh_style.css" media="screen">
    
    <link rel="alternate" type="application/rss+xml" title="News" href="../feed.xml">
    
    <script src="../javascript/sh_main.min.js" type="text/javascript"></script>
    <script src="../javascript/sh_lang.js" type="text/javascript"></script>
 	
 	<script type="text/javascript">
 	  var _gaq = _gaq || [];
 	  _gaq.push(['_setAccount', 'UA-23178588-3']);
 	  _gaq.push(['_trackPageview']);
 
 	  (function() {
 		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
 	  })();
 	</script>
 	
    <meta name="generator" content="nanoc 3.1.6">
  </head>
  <body>
    <div id="header">
      <h1 id="blog-title">autosetup</h1>
      <p id="description">A build environment "autoconfigurator"</p>
    </div>
    <div id="content">
        <div class="breadcrumbs">
        
        <a id="rss" title="News RSS Feed" href="../feed.xml"><img src="../img/rssicon.png"></a>
        
        
            <a href="../">Overview</a> 
            » 
        
            <a href="./">News</a> 
             
        
        </div>
        <div class="main" id="news">
        
        
<div class="main" id="main">
<p class="articledate">Tuesday, 19 July 2011</p>
<h2 class="news"><a href="../articles/autoconf-migration/">Automatic autoconf migration tool</a></h2>


<p>Although <strong>autosetup</strong> configurations are generally easy to create,
developers moving a complex project from <strong>autoconf</strong> to autosetup
may still find it tedious to create the <strong>auto.def</strong> configuration
file.</p>

<p>To simplify migration from autoconf, autosetup includes a migration
tool which will automatically convert a <strong>configure.in</strong> or <strong>configure.ac</strong>
file to an auto.def file.</p>

<p>Consider the following migration of <a href="http://tinytcl.sourceforge.net/">tinytcl</a>:</p>

<pre class="sh_unix">
$ cd tinytcl
$ ~/src/autosetup.git/migrate-autoconf
Migrating configure.ac to auto.def
Created auto.def. Now edit to resolve items marked XXX
$ ~/src/autosetup.git/autosetup --install
Installed autosetup v0.6.2 to autosetup/
I see configure, but not created by autosetup, so I won't overwrite it.
Use autosetup --init --force to overwrite.
$ ./autosetup/autosetup --init --force
I will overwrite the existing configure because you used --force.
</pre>

<p>Now the migrated auto.def can be edited. Before editing it looks something like this:</p>

<pre class="sh_autosetup">
# Created by migrate-autoconf - fix items marked XXX

use cc cc-lib

options {
    shared=0         =&gt;  {Build a shared library}
    history=0        =&gt;  {Enable history support}
    debug=0          =&gt;  {Enable debugging command: cmdtrace}
    fork=1           =&gt;  {Do not use fork (no exec, etc.)}
    syslog=0         =&gt;  {Build the syslog extension}
}

#                                               -*- Autoconf -*-
# Process this file with autoconf to produce a configure script.


# XXX autosetup automatically substitutes all define'd values
#     In general, simply 'define' the value rather than using a shell
#     variable and AC_SUBST.
#
# XXX AC_SUBST TARGET_PLATFORM $ac_cv_host

# Checks for programs.

# XXX TINYTCL_IS_STATIC=1
if {[opt-bool shared]} {
    # XXX if test "x$enableval" = "xyes" ; then
    msg-result "* creating shared library"
    # XXX TINYTCL_IS_STATIC=
    # XXX fi
}
# XXX AC_SUBST TINYTCL_IS_STATIC $TINYTCL_IS_STATIC
...
</pre>

<p>After editing, <em>auto.def</em> looks more like:</p>

<pre class="sh_autosetup">
...
define TARGET_PLATFORM [get-define host]

define TINYTCL_IS_STATIC 1
if {[opt-bool shared]} {
    msg-result "* creating shared library"
    define TINYTCL_IS_STATIC 0
}
...
</pre>

<p>The final edited version is available at in the autosetup repository
as <a href="https://github.com/msteveb/autosetup/blob/master/examples/migration/tinytcl/auto.def.edited">auto.def.edited</a>
along with additional examples.</p>

<p>Note that <strong>migrate-autoconf</strong> only understands a common subset of autoconf macros and
uses various heuristics to perform the migration. Nonetheless, migrate-autoconf can 
significantly speed up migration from autoconf.</p>



</div>

<div class="main" id="main">
<p class="articledate">Thursday, 14 July 2011</p>
<h2 class="news"><a href="../articles/fossil-adopts-autosetup/">Fossil adopts autosetup</a></h2>


<p>Recently the <a href="http://fossil-scm.org/">Fossil SCM</a> has been adopted
by <a href="http://wiki.tcl.tk/">Tcl/Tk</a> as a replacement for cvs.  Now the
Tcl-based <a href="http://msteveb.github.com/autosetup/">autosetup</a> has
been adopted as the development configuration system for
<a href="http://www.fossil-scm.org/">Fossil</a>.</p>

<p>Fossil is similar to many open source projects that are required
to support a number of different platforms. The obvious approach
is to use autoconf and possibly automake, but <a href="http://identi.ca/group/fossil#notice-76160895">many people</a>
find that approach <a href="http://www.mail-archive.com/fossil-users@lists.fossil-scm.org/msg04899.html">frustrating</a>.</p>

<p>Some of the immediate benefits of autosetup are support for cross compilation
and easily allowing Fossil to be build with different options.</p>



</div>

<div class="main" id="main">
<p class="articledate">Friday, 08 July 2011</p>
<h2 class="news"><a href="../articles/msys-mingw-support/">MSYS/MinGW support</a></h2>


<p>Apparently there is considerable interest in supporting builds
within <a href="http://www.mingw.org/wiki/MSYS">MSYS/MinGW</a> for Windows
rather than cygwin or cross compiling MinGW from (e.g.) Linux.</p>

<p>The main difficulty in supporting this platform is that MinGW
doesn’t support fork/exec (or actually vfork/exec) and thus <code>exec</code>
support in the bootstrap jimsh is limited.</p>

<p>Fortunately, autosetup has few requirements of <code>exec</code> and these
limitations can be worked around, along with other differences
such as the use of backlashes in paths.</p>

<p><strong>autosetup running under the MSYS bash shell</strong></p>

<pre class="sh_unix">
$ cd examples/typical
$ ./configure
No installed jimsh or tclsh, building local bootstrap jimsh0
Host System...i686-pc-mingw32
Build System...i686-pc-mingw32
C compiler... gcc -g -O2
C++ compiler... c++ -g -O2
Checking for stdlib.h...ok
Checking for long long...ok
Checking for sizeof long long...8
Checking for sizeof void *...4
Checking for sys/un.h...not found
Checking for regcomp...not found
Checking for waitpid...not found
Checking for sigaction...not found
Checking for sys_signame...not found
Checking for sys_siglist...not found
Checking for syslog...not found
Checking for opendir...ok
Checking for readlink...not found
Checking for sleep...not found
Checking for usleep...ok
Checking for pipe...not found
Checking for inet_ntop...not found
Checking for getaddrinfo...not found
Enabling UTF-8
Building static library
Created config.h
Created Makefile from Makefile.in
</pre>



</div>

<div class="main" id="main">
<p class="articledate">Wednesday, 06 July 2011</p>
<h2 class="news"><a href="../articles/autosetup-062/">autosetup 0.6.2</a></h2>


<p><strong>autosetup</strong> has seen continuing improvements recently, so I've bumped the version to 0.6.2</p>

<p>Here is a summary of recent changes:</p>

<ul>
  <li>make-autoconf-h is now deprecated in favour of the more flexible make-config-header</li>
  <li>New: cc-check-defines, cc-check-decls</li>
  <li>New module: cc-lib contains cc-check-lfs and cc-check-endian</li>
  <li>Include files are automatically checked as needed</li>
  <li>Improved documentation</li>
</ul>



</div>

<div class="main" id="main">
<p class="articledate">Thursday, 05 May 2011</p>
<h2 class="news"><a href="../articles/2011-05-05/">New Website Launched</a></h2>


<p>The <strong>autosetup</strong> project has a new <a href="http://msteveb.github.com/autosetup/">website</a>
with better, more approachable documentation.</p>

<p>The new website includes separate documentation for <a href="../user/">users</a> and <a href="../developer/">developers</a></p>



</div>

<div class="main" id="main">
<p class="articledate">Tuesday, 14 December 2010</p>
<h2 class="news"><a href="../articles/2010-12-14/">Initial release of autosetup</a></h2>


<p>The initial version of <strong>autosetup</strong> — a faster, better autoconf — has been released.
Find it on github at <a href="https://github.com/msteveb/autosetup/">https://github.com/msteveb/autosetup/</a></p>



</div>

<p><a href="../articles/">See All News Articles »</a></p>

        </div>
    </div>
    <div id="sidebar">
      <h2>About autosetup</h2>
      <ul>
        
            
            <li><a href="../">Overview</a></li>
        
            
            <li><span class="active" title="You're here.">News</span></li>
        
            
            <li><a href="../download/">Download</a></li>
        
            
            <li><a href="../user/">Running autosetup</a></li>
        
            
            <li><a href="../developer/">Developing</a></li>
        
            
            <li><a href="../developer/examples/">Examples</a></li>
        
            
            <li><a href="../license/">License</a></li>
        
            
            <li><a href="../why/">Motivation</a></li>
        
      </ul>
      <h2>Community</h2>
      <ul>
        <li><a href="https://github.com/msteveb/autosetup">autosetup on github</a></li>
        <li><a href="https://github.com/msteveb/autosetup/commits/master">» commit history</a></li>
        <li><a href="https://github.com/msteveb/autosetup/issues">» open issues</a></li>
      </ul>
    </div>
    
    <script language="javascript">sh_highlightDocument();</script>
  </body>
</html>
