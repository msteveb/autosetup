<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
    <title>autosetup - Command Reference</title>
    <link rel="stylesheet" type="text/css" href="../../css/style.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../../css/sh_style.css" media="screen">
    
    <script src="../../javascript/sh_main.min.js" type="text/javascript"></script>
    <script src="../../javascript/sh_lang.js" type="text/javascript"></script>
 	
 	<script type="text/javascript">
 	  var _gaq = _gaq || [];
 	  _gaq.push(['_setAccount', 'UA-23178588-3']);
 	  _gaq.push(['_trackPageview']);
 
 	  (function() {
 		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
 	  })();
 	</script>
 	
    <meta name="generator" content="Nanoc 4.11.5">
  </head>
  <body>
    <div id="header">
      <h1 id="blog-title">autosetup</h1>
      <p id="description">A build environment "autoconfigurator"</p>
    </div>
    <div id="content">
        <div class="breadcrumbs">
        
        
            <a href="../../">Overview</a>
            » 
        
            <a href="../">Developing with autosetup</a>
            » 
        
            <a href="./">Command Reference</a>
            
        
        </div>
        <div class="main" id="main">
        
        <h1 id="autosetup-v067----command-reference">autosetup v0.6.7 – Command Reference</h1>

<h2 id="introduction">Introduction</h2>

<p>See <a href="http://msteveb.github.com/autosetup/">http://msteveb.github.com/autosetup/</a> for the online documentation for <strong><code>autosetup</code></strong></p>

<p><strong><code>autosetup</code></strong> provides a number of built-in commands which are documented below. These may be used from <strong><code>auto.def</code></strong> to test for features, define variables, create files from templates and other similar actions.</p>

<h2 id="core-commands">Core Commands</h2>

<h3 id="opt-bool--nodefault-option-"><code>opt-bool ?-nodefault? option ...</code></h3>

<p>Check each of the named, boolean options and if any have been explicitly enabled or disabled by the user, return 1 or 0 accordingly.</p>

<p>If the option was specified more than once, the last value wins. e.g. With <strong><code>--enable-foo --disable-foo</code></strong>, <strong><code>[opt-bool foo]</code></strong> will return 0</p>

<p>If no value was specified by the user, returns the default value for the first option. If <strong><code>-nodefault</code></strong> is given, this behaviour changes and -1 is returned instead.</p>

<h3 id="opt-val-optionlist-default"><code>opt-val optionlist ?default=""?</code></h3>

<p>Returns a list containing all the values given for the non-boolean options in <strong><code>$optionlist</code></strong>. There will be one entry in the list for each option given by the user, including if the same option was used multiple times. If only a single value is required, use something like:</p>

<pre><code>lindex [opt-val $names] end
</code></pre>

<p>If no options were set, <strong><code>$default</code></strong> is returned (exactly, not as a list).</p>

<h3 id="module-options-optionlist"><code>module-options optionlist</code></h3>

<p>Like <strong><code>options</code></strong>, but used within a module.</p>

<h3 id="options-optionspec"><code>options optionspec</code></h3>

<p>Specifies configuration-time options which may be selected by the user and checked with <strong><code>opt-val</code></strong> and <strong><code>opt-bool</code></strong>. <strong><code>$optionspec</code></strong> contains a series of options specifications separated by newlines, as follows:</p>

<p>A boolean option is of the form:</p>

<pre><code>name[=0|1]  =&gt; "Description of this boolean option"
</code></pre>

<p>The default is <strong><code>name=0</code></strong>, meaning that the option is disabled by default. If <strong><code>name=1</code></strong> is used to make the option enabled by default, the description should reflect that with text like “Disable support for …”.</p>

<p>An argument option (one which takes a parameter) is of the form:</p>

<pre><code>name:[=]value  =&gt; "Description of this option"
</code></pre>

<p>If the <strong><code>name:value</code></strong> form is used, the value must be provided with the option (as <strong><code>--name=myvalue</code></strong>). If the <strong><code>name:=value</code></strong> form is used, the value is optional and the given value is used as the default if it is not provided.</p>

<p>Undocumented options are also supported by omitting the <strong><code>=&gt; description</code></strong>. These options are not displayed with <strong><code>--help</code></strong> and can be useful for internal options or as aliases.</p>

<p>For example, <strong><code>--disable-lfs</code></strong> is an alias for <strong><code>--disable=largefile</code></strong>:</p>

<pre><code>lfs=1 largefile=1 =&gt; "Disable large file support"
</code></pre>

<h3 id="define-name-value1"><code>define name ?value=1?</code></h3>

<p>Defines the named variable to the given value. These (name, value) pairs represent the results of the configuration check and are available to be subsequently checked, modified and substituted.</p>

<h3 id="undefine-name"><code>undefine name</code></h3>

<p>Undefine the named variable.</p>

<h3 id="define-append-name-value-"><code>define-append name value ...</code></h3>

<p>Appends the given value(s) to the given “defined” variable. If the variable is not defined or empty, it is set to <strong><code>$value</code></strong>. Otherwise the value is appended, separated by a space. Any extra values are similarly appended. If any value is already contained in the variable (as a substring) it is omitted.</p>

<h3 id="get-define-name-default0"><code>get-define name ?default=0?</code></h3>

<p>Returns the current value of the “defined” variable, or <strong><code>$default</code></strong> if not set.</p>

<h3 id="is-defined-name"><code>is-defined name</code></h3>

<p>Returns 1 if the given variable is defined.</p>

<h3 id="all-defines"><code>all-defines</code></h3>

<p>Returns a dictionary (name, value list) of all defined variables.</p>

<p>This is suitable for use with <strong><code>dict</code></strong>, <strong><code>array set</code></strong> or <strong><code>foreach</code></strong> and allows for arbitrary processing of the defined variables.</p>

<h3 id="get-env-name-default"><code>get-env name default</code></h3>

<p>If <strong><code>$name</code></strong> was specified on the command line, return it. Otherwise if <strong><code>$name</code></strong> was set in the environment, return it. Otherwise return <strong><code>$default</code></strong>.</p>

<h3 id="env-is-set-name"><code>env-is-set name</code></h3>

<p>Returns 1 if <strong><code>$name</code></strong> was specified on the command line or in the environment. Note that an empty environment variable is not considered to be set.</p>

<h3 id="readfile-filename-default"><code>readfile filename ?default=""?</code></h3>

<p>Return the contents of the file, without the trailing newline. If the file doesn’t exist or can’t be read, returns <strong><code>$default</code></strong>.</p>

<h3 id="writefile-filename-value"><code>writefile filename value</code></h3>

<p>Creates the given file containing <strong><code>$value</code></strong>. Does not add an extra newline.</p>

<h3 id="find-executable-name"><code>find-executable name</code></h3>

<p>Searches the path for an executable with the given name. Note that the name may include some parameters, e.g. <strong><code>cc -mbig-endian</code></strong>, in which case the parameters are ignored. Returns 1 if found, or 0 if not.</p>

<h3 id="find-an-executable--required-name-"><code>find-an-executable ?-required? name ...</code></h3>

<p>Given a list of possible executable names, searches for one of these on the path.</p>

<p>Returns the name found, or “” if none found. If the first parameter is <strong><code>-required</code></strong>, an error is generated if no executable is found.</p>

<h3 id="configlog-msg"><code>configlog msg</code></h3>

<p>Writes the given message to the configuration log, <strong><code>config.log</code></strong>.</p>

<h3 id="msg-checking-msg"><code>msg-checking msg</code></h3>

<p>Writes the message with no newline to stdout.</p>

<h3 id="msg-result-msg"><code>msg-result msg</code></h3>

<p>Writes the message to stdout.</p>

<h3 id="msg-quiet-command-"><code>msg-quiet command ...</code></h3>

<p><strong><code>msg-quiet</code></strong> evaluates it’s arguments as a command with output from <strong><code>msg-checking</code></strong> and <strong><code>msg-result</code></strong> suppressed.</p>

<p>This is useful if a check needs to run a subcheck which isn’t of interest to the user.</p>

<h3 id="user-error-msg"><code>user-error msg</code></h3>

<p>Indicate incorrect usage to the user, including if required components or features are not found. <strong><code>autosetup</code></strong> exits with a non-zero return code.</p>

<h3 id="user-notice-msg"><code>user-notice msg</code></h3>

<p>Output the given message to stderr.</p>

<h3 id="autosetup-require-version-required"><code>autosetup-require-version required</code></h3>

<p>Checks the current version of <strong><code>autosetup</code></strong> against <strong><code>$required</code></strong>. A fatal error is generated if the current version is less than that required.</p>

<h3 id="use-module-"><code>use module ...</code></h3>

<p>Load the given library modules. e.g. <strong><code>use cc cc-shared</code></strong></p>

<p>Note that module <strong><code>X</code></strong> is implemented in either <strong><code>autosetup/X.tcl</code></strong> or <strong><code>autosetup/X/init.tcl</code></strong></p>

<p>The latter form is useful for a complex module which requires additional support file. In this form, <strong><code>$::usedir</code></strong> is set to the module directory when it is loaded.</p>

<h3 id="compare-versions-version1-version2"><code>compare-versions version1 version2</code></h3>

<p>Versions are of the form <strong><code>a.b.c</code></strong> (may be any number of numeric components)</p>

<p>Compares the two versions and returns:</p>

<pre><code>-1 if v1 &lt; v2
 0 if v1 == v2
 1 if v1 &gt; v2
</code></pre>

<p>If one version has fewer components than the other, 0 is substituted to the right. e.g.</p>

<pre><code>0.2   &lt;  0.3
0.2.5 &gt;  0.2
1.1   == 1.1.0
</code></pre>

<h3 id="suffix-suf-list"><code>suffix suf list</code></h3>

<p>Takes a list and returns a new list with <strong><code>$suf</code></strong> appended to each element</p>

<pre><code>suffix .c {a b c} =&gt; {a.c b.c c.c}
</code></pre>

<h3 id="prefix-pre-list"><code>prefix pre list</code></h3>

<p>Takes a list and returns a new list with <strong><code>$pre</code></strong> prepended to each element</p>

<pre><code>prefix jim- {a.c b.c} =&gt; {jim-a.c jim-b.c}
</code></pre>

<h2 id="module-cc">Module: cc</h2>

<p>The <strong><code>cc</code></strong> module supports checking various <strong><code>features</code></strong> of the C or C++ compiler/linker environment. Common commands are <strong><code>cc-check-includes</code></strong>, <strong><code>cc-check-types</code></strong>, <strong><code>cc-check-functions</code></strong>, <strong><code>cc-with</code></strong>, <strong><code>make-config-header</code></strong> and <strong><code>make-template</code></strong>.</p>

<p>The following environment variables are used if set:</p>

<pre><code>CC       - C compiler
CXX      - C++ compiler
CCACHE   - Set to "none" to disable automatic use of ccache
CFLAGS   - Additional C compiler flags
CXXFLAGS - Additional C++ compiler flags
LDFLAGS  - Additional compiler flags during linking
LIBS     - Additional libraries to use (for all tests)
CROSS    - Tool prefix for cross compilation
</code></pre>

<p>The following variables are defined from the corresponding environment variables if set.</p>

<pre><code>CPPFLAGS
LINKFLAGS
CC_FOR_BUILD
LD
</code></pre>

<h3 id="cc-check-sizeof-type-"><code>cc-check-sizeof type ...</code></h3>

<p>Checks the size of the given types (between 1 and 32, inclusive). Defines a variable with the size determined, or <strong><code>unknown</code></strong> otherwise. e.g. for type <strong><code>long long</code></strong>, defines <strong><code>SIZEOF_LONG_LONG</code></strong>. Returns the size of the last type.</p>

<h3 id="cc-check-includes-includes-"><code>cc-check-includes includes ...</code></h3>

<p>Checks that the given include files can be used.</p>

<h3 id="cc-include-needs-include-required-"><code>cc-include-needs include required ...</code></h3>

<p>Ensures that when checking for <strong><code>$include</code></strong>, a check is first made for each <strong><code>$required</code></strong> file, and if found, it is included with <strong><code>#include</code></strong>.</p>

<h3 id="cc-check-types-type-"><code>cc-check-types type ...</code></h3>

<p>Checks that the types exist.</p>

<h3 id="cc-check-defines-define-"><code>cc-check-defines define ...</code></h3>

<p>Checks that the given preprocessor symbol is defined.</p>

<h3 id="cc-check-decls-name-"><code>cc-check-decls name ...</code></h3>

<p>Checks that each given name is either a preprocessor symbol or rvalue such as an enum. Note that the define used is <strong><code>HAVE_DECL_xxx</code></strong> rather than <strong><code>HAVE_xxx</code></strong>.</p>

<h3 id="cc-check-functions-function-"><code>cc-check-functions function ...</code></h3>

<p>Checks that the given functions exist (can be linked).</p>

<h3 id="cc-check-members-typemember-"><code>cc-check-members type.member ...</code></h3>

<p>Checks that the given type/structure members exist. A structure member is of the form <strong><code>struct stat.st_mtime</code></strong>.</p>

<h3 id="cc-check-function-in-lib-function-libs-otherlibs"><code>cc-check-function-in-lib function libs ?otherlibs?</code></h3>

<p>Checks that the given function can be found in one of the libs.</p>

<p>First checks for no library required, then checks each of the libraries in turn.</p>

<p>If the function is found, the feature is defined and <strong><code>lib_$function</code></strong> is defined to <strong><code>-l$lib</code></strong> where the function was found, or “” if no library required. In addition, <strong><code>-l$lib</code></strong> is prepended to the <strong><code>LIBS</code></strong> define.</p>

<p>If additional libraries may be needed for linking, they should be specified with <strong><code>$extralibs</code></strong> as <strong><code>-lotherlib1 -lotherlib2</code></strong>. These libraries are not automatically added to <strong><code>LIBS</code></strong>.</p>

<p>Returns 1 if found or 0 if not.</p>

<h3 id="cc-check-tools-tool-"><code>cc-check-tools tool ...</code></h3>

<p>Checks for existence of the given compiler tools, taking into account any cross compilation prefix.</p>

<p>For example, when checking for <strong><code>ar</code></strong>, first <strong><code>AR</code></strong> is checked on the command line and then in the environment. If not found, <strong><code>${host}-ar</code></strong> or simply <strong><code>ar</code></strong> is assumed depending upon whether cross compiling. The path is searched for this executable, and if found <strong><code>AR</code></strong> is defined to the executable name. Note that even when cross compiling, the simple <strong><code>ar</code></strong> is used as a fallback, but a warning is generated. This is necessary for some toolchains.</p>

<p>It is an error if the executable is not found.</p>

<h3 id="cc-check-progs-prog-"><code>cc-check-progs prog ...</code></h3>

<p>Checks for existence of the given executables on the path.</p>

<p>For example, when checking for <strong><code>grep</code></strong>, the path is searched for the executable, <strong><code>grep</code></strong>, and if found <strong><code>GREP</code></strong> is defined as <strong><code>grep</code></strong>.</p>

<p>If the executable is not found, the variable is defined as <strong><code>false</code></strong>. Returns 1 if all programs were found, or 0 otherwise.</p>

<h3 id="cc-with-settings--script-"><code>cc-with settings ?{ script }?</code></h3>

<p>Sets the given <strong><code>cctest</code></strong> settings and then runs the tests in <strong><code>$script</code></strong>. Note that settings such as <strong><code>-lang</code></strong> replace the current setting, while those such as <strong><code>-includes</code></strong> are appended to the existing setting.</p>

<p>If no script is given, the settings become the default for the remainder of the <strong><code>auto.def</code></strong> file.</p>

<pre><code>cc-with {-lang c++} {
  # This will check with the C++ compiler
  cc-check-types bool
  cc-with {-includes signal.h} {
    # This will check with the C++ compiler, signal.h and any existing includes.
    ...
  }
  # back to just the C++ compiler
}
</code></pre>

<p>The <strong><code>-libs</code></strong> setting is special in that newer values are added <em>before</em> earlier ones.</p>

<pre><code>cc-with {-libs {-lc -lm}} {
  cc-with {-libs -ldl} {
    cctest -libs -lsocket ...
    # libs will be in this order: -lsocket -ldl -lc -lm
  }
}
</code></pre>

<h3 id="cctest-settings"><code>cctest ?settings?</code></h3>

<p>Low level C/C++ compiler checker. Compiles and or links a small C program according to the arguments and returns 1 if OK, or 0 if not.</p>

<p>Supported settings are:</p>

<pre><code>-cflags cflags      A list of flags to pass to the compiler
-includes list      A list of includes, e.g. {stdlib.h stdio.h}
-declare code       Code to declare before main()
-link 1             Don't just compile, link too
-lang c|c++         Use the C (default) or C++ compiler
-libs liblist       List of libraries to link, e.g. {-ldl -lm}
-code code          Code to compile in the body of main()
-source code        Compile a complete program. Ignore -includes, -declare and -code
-sourcefile file    Shorthand for -source [readfile [get-define srcdir]/$file]
-nooutput 1         Treat any compiler output (e.g. a warning) as an error
</code></pre>

<p>Unless <strong><code>-source</code></strong> or <strong><code>-sourcefile</code></strong> is specified, the C program looks like:</p>

<pre><code>#include &lt;firstinclude&gt;   /* same for remaining includes in the list */
</code></pre>

<pre><code>declare-code              /* any code in -declare, verbatim */
</code></pre>

<pre><code>int main(void) {
  code                    /* any code in -code, verbatim */
  return 0;
}
</code></pre>

<p>Any failures are recorded in <strong><code>config.log</code></strong></p>

<h3 id="make-autoconf-h-outfile-auto-patternshave-bare-patternssizeof"><code>make-autoconf-h outfile ?auto-patterns=HAVE_*? ?bare-patterns=SIZEOF_*?</code></h3>

<p>Deprecated - see <strong><code>make-config-header</code></strong></p>

<h3 id="make-config-header-outfile--auto-patternlist--bare-patternlist--none-patternlist--str-patternlist-"><code>make-config-header outfile ?-auto patternlist? ?-bare patternlist? ?-none patternlist? ?-str patternlist? ...</code></h3>

<p>Examines all defined variables which match the given patterns and writes an include file, <strong><code>$file</code></strong>, which defines each of these. Variables which match <strong><code>-auto</code></strong> are output as follows:</p>

<ul>
  <li>defines which have the value <strong><code>0</code></strong> are ignored.</li>
  <li>defines which have integer values are defined as the integer value.</li>
  <li>any other value is defined as a string, e.g. <strong><code>"value"</code></strong></li>
</ul>

<p>Variables which match <strong><code>-bare</code></strong> are defined as-is. Variables which match <strong><code>-str</code></strong> are defined as a string, e.g. <strong><code>"value"</code></strong> Variables which match <strong><code>-none</code></strong> are omitted.</p>

<p>Note that order is important. The first pattern that matches is selected. Default behaviour is:</p>

<pre><code> -bare {SIZEOF_* HAVE_DECL_*} -auto HAVE_* -none *
</code></pre>

<p>If the file would be unchanged, it is not written.</p>

<h2 id="module-cc-db">Module: cc-db</h2>

<p>The <strong><code>cc-db</code></strong> module provides a knowledge-base of system idiosyncrasies. In general, this module can always be included.</p>

<h2 id="module-cc-lib">Module: cc-lib</h2>

<p>Provides a library of common tests on top of the <strong><code>cc</code></strong> module.</p>

<h3 id="cc-check-lfs"><code>cc-check-lfs</code></h3>

<p>The equivalent of the <strong><code>AC_SYS_LARGEFILE</code></strong> macro.</p>

<p>defines <strong><code>HAVE_LFS</code></strong> if LFS is available, and defines <strong><code>_FILE_OFFSET_BITS=64</code></strong> if necessary</p>

<p>Returns 1 if <strong><code>LFS</code></strong> is available or 0 otherwise</p>

<h3 id="cc-check-endian"><code>cc-check-endian</code></h3>

<p>The equivalent of the <strong><code>AC_C_BIGENDIAN</code></strong> macro.</p>

<p>defines <strong><code>HAVE_BIG_ENDIAN</code></strong> if endian is known to be big, or <strong><code>HAVE_LITTLE_ENDIAN</code></strong> if endian is known to be little.</p>

<p>Returns 1 if determined, or 0 if not.</p>

<h3 id="cc-check-flags-flag-"><code>cc-check-flags flag ?...?</code></h3>

<p>Checks whether the given C/C++ compiler flags can be used. Defines feature names prefixed with <strong><code>HAVE_CFLAG</code></strong> and <strong><code>HAVE_CXXFLAG</code></strong> respectively, and appends working flags to <strong><code>-cflags</code></strong> and <strong><code>CFLAGS</code></strong> or <strong><code>CXXFLAGS</code></strong>.</p>

<h3 id="cc-check-standards-ver-"><code>cc-check-standards ver ?...?</code></h3>

<p>Checks whether the C/C++ compiler accepts one of the specified <strong><code>-std=$ver</code></strong> options, and appends the first working one to <strong><code>-cflags</code></strong> and <strong><code>CFLAGS</code></strong> or <strong><code>CXXFLAGS</code></strong>.</p>

<h3 id="cc-check-c11"><code>cc-check-c11</code></h3>

<p>Checks for several C11/C++11 extensions and their alternatives. Currently checks for <strong><code>_Static_assert</code></strong>, <strong><code>_Alignof</code></strong>, <strong><code>__alignof__</code></strong>, <strong><code>__alignof</code></strong>.</p>

<h3 id="cc-check-alloca"><code>cc-check-alloca</code></h3>

<p>The equivalent of the <strong><code>AC_FUNC_ALLOCA</code></strong> macro.</p>

<p>Checks for the existence of <strong><code>alloca</code></strong> defines <strong><code>HAVE_ALLOCA</code></strong> and returns 1 if it exists.</p>

<h3 id="cc-signal-return-type"><code>cc-signal-return-type</code></h3>

<p>The equivalent of the <strong><code>AC_TYPE_SIGNAL</code></strong> macro.</p>

<p>defines <strong><code>RETSIGTYPE</code></strong> to <strong><code>int</code></strong> or <strong><code>void</code></strong>.</p>

<h2 id="module-cc-shared">Module: cc-shared</h2>

<p>The <strong><code>cc-shared</code></strong> module provides support for shared libraries and shared objects. It defines the following variables:</p>

<pre><code>SH_CFLAGS         Flags to use compiling sources destined for a shared library
SH_LDFLAGS        Flags to use linking (creating) a shared library
SH_SOPREFIX       Prefix to use to set the soname when creating a shared library
SH_SOEXT          Extension for shared libs
SH_SOEXTVER       Format for versioned shared libs - %s = version
SHOBJ_CFLAGS      Flags to use compiling sources destined for a shared object
SHOBJ_LDFLAGS     Flags to use linking a shared object, undefined symbols allowed
SHOBJ_LDFLAGS_R   - as above, but all symbols must be resolved
SH_LINKFLAGS      Flags to use linking an executable which will load shared objects
LD_LIBRARY_PATH   Environment variable which specifies path to shared libraries
STRIPLIBFLAGS     Arguments to strip a dynamic library
</code></pre>

<h2 id="module-pkg-config">Module: pkg-config</h2>

<p>The <strong><code>pkg-config</code></strong> module allows package information to be found via <strong><code>pkg-config</code></strong>.</p>

<p>If not cross-compiling, the package path should be determined automatically by <strong><code>pkg-config</code></strong>. If cross-compiling, the default package path is the compiler sysroot. If the C compiler doesn’t support <strong><code>-print-sysroot</code></strong>, the path can be supplied by the <strong><code>--sysroot</code></strong> option or by defining <strong><code>SYSROOT</code></strong>.</p>

<p><strong><code>PKG_CONFIG</code></strong> may be set to use an alternative to <strong><code>pkg-config</code></strong>.</p>

<h3 id="pkg-config-init-required"><code>pkg-config-init ?required?</code></h3>

<p>Initialises the <strong><code>pkg-config</code></strong> system. Unless <strong><code>$required</code></strong> is set to 0, it is a fatal error if a usable <strong><code>pkg-config</code></strong> is not found .</p>

<p>This command will normally be called automatically as required, but it may be invoked explicitly if lack of <strong><code>pkg-config</code></strong> is acceptable.</p>

<p>Returns 1 if ok, or 0 if <strong><code>pkg-config</code></strong> not found/usable (only if <strong><code>$required</code></strong> is 0).</p>

<h3 id="pkg-config-module-requirements"><code>pkg-config module ?requirements?</code></h3>

<p>Use <strong><code>pkg-config</code></strong> to find the given module meeting the given requirements. e.g.</p>

<pre><code>pkg-config pango &gt;= 1.37.0
</code></pre>

<p>If found, returns 1 and sets <strong><code>HAVE_PKG_PANGO</code></strong> to 1 along with:</p>

<pre><code>PKG_PANGO_VERSION to the found version
PKG_PANGO_LIBS    to the required libs (--libs-only-l)
PKG_PANGO_LDFLAGS to the required linker flags (--libs-only-L)
PKG_PANGO_CFLAGS  to the required compiler flags (--cflags)
</code></pre>

<p>If not found, returns 0.</p>

<h3 id="pkg-config-get-module-setting"><code>pkg-config-get module setting</code></h3>

<p>Convenience access to the results of <strong><code>pkg-config</code></strong>.</p>

<p>For example, <strong><code>[pkg-config-get pango CFLAGS]</code></strong> returns the value of <strong><code>PKG_PANGO_CFLAGS</code></strong>, or <strong><code>""</code></strong> if not defined.</p>

<h2 id="module-system">Module: system</h2>

<p>This module supports common system interrogation and options such as <strong><code>--host</code></strong>, <strong><code>--build</code></strong>, <strong><code>--prefix</code></strong>, and setting <strong><code>srcdir</code></strong>, <strong><code>builddir</code></strong>, and <strong><code>EXEEXT</code></strong>.</p>

<p>It also support the “feature” naming convention, where searching for a feature such as <strong><code>sys/type.h</code></strong> defines <strong><code>HAVE_SYS_TYPES_H</code></strong>.</p>

<p>It defines the following variables, based on <strong><code>--prefix</code></strong> unless overridden by the user:</p>

<pre><code>datadir
sysconfdir
sharedstatedir
localstatedir
infodir
mandir
includedir
</code></pre>

<p>If <strong><code>--prefix</code></strong> is not supplied, it defaults to <strong><code>/usr/local</code></strong> unless <strong><code>defaultprefix</code></strong> is defined <em>before</em> including the <strong><code>system</code></strong> module.</p>

<h3 id="check-feature-name--script-"><code>check-feature name { script }</code></h3>

<p>defines feature <strong><code>$name</code></strong> to the return value of <strong><code>$script</code></strong>, which should be 1 if found or 0 if not found.</p>

<p>e.g. the following will define <strong><code>HAVE_CONST</code></strong> to 0 or 1.</p>

<pre><code>check-feature const {
    cctest -code {const int _x = 0;}
}
</code></pre>

<h3 id="have-feature-name-default0"><code>have-feature name ?default=0?</code></h3>

<p>Returns the value of feature <strong><code>$name</code></strong> if defined, or <strong><code>$default</code></strong> if not.</p>

<p>See <strong><code>feature-define-name</code></strong> for how the “feature” name is translated into the “define” name.</p>

<h3 id="define-feature-name-value1"><code>define-feature name ?value=1?</code></h3>

<p>Sets the feature <strong><code>define</code></strong> to <strong><code>$value</code></strong>.</p>

<p>See <strong><code>feature-define-name</code></strong> for how the “feature” name is translated into the “define” name.</p>

<h3 id="feature-checked-name"><code>feature-checked name</code></h3>

<p>Returns 1 if feature <strong><code>$name</code></strong> has been checked, whether true or not.</p>

<h3 id="feature-define-name-name-prefixhave"><code>feature-define-name name ?prefix=HAVE_?</code></h3>

<p>Converts a “feature” name to the corresponding “define”, e.g. <strong><code>sys/stat.h</code></strong> becomes <strong><code>HAVE_SYS_STAT_H</code></strong>.</p>

<p>Converts <strong><code>*</code></strong> to <strong><code>P</code></strong> and all non-alphanumeric to underscore.</p>

<h3 id="write-if-changed-filename-contents-script"><code>write-if-changed filename contents ?script?</code></h3>

<p>If <strong><code>$filename</code></strong> doesn’t exist, or it’s contents are different to <strong><code>$contents</code></strong>, the file is written and <strong><code>$script</code></strong> is evaluated.</p>

<p>Otherwise a “file is unchanged” message is displayed.</p>

<h3 id="make-template-template-outfile"><code>make-template template ?outfile?</code></h3>

<p>Reads the input file <strong><code>&lt;srcdir&gt;/$template</code></strong> and writes the output file <strong><code>$outfile</code></strong>. If <strong><code>$outfile</code></strong> is blank/omitted, <strong><code>$template</code></strong> should end with <strong><code>.in</code></strong> which is removed to create the output file name.</p>

<p>Each pattern of the form <strong><code>@define@</code></strong> is replaced with the corresponding “define”, if it exists, or left unchanged if not.</p>

<p>The special value <strong><code>@srcdir@</code></strong> is substituted with the relative path to the source directory from the directory where the output file is created, while the special value <strong><code>@top_srcdir@</code></strong> is substituted with the relative path to the top level source directory.</p>

<p>Conditional sections may be specified as follows:</p>

<pre><code>@if name == value
lines
@else
lines
@endif
</code></pre>

<p>Where <strong><code>name</code></strong> is a defined variable name and <strong><code>@else</code></strong> is optional. If the expression does not match, all lines through <strong><code>@endif</code></strong> are ignored.</p>

<p>The alternative forms may also be used:</p>

<pre><code>@if name
@if name != value
</code></pre>

<p>Where the first form is true if the variable is defined, but not empty nor 0.</p>

<p>Currently these expressions can’t be nested.</p>

<h2 id="module-tmake">Module: tmake</h2>

<p>The <strong><code>tmake</code></strong> module makes it easy to support the tmake build system.</p>

<p>The following variables are set:</p>

<pre><code>CONFIGURED  - to indicate that the project is configured
</code></pre>

<h3 id="make-tmake-settings-outfile-patterns-"><code>make-tmake-settings outfile patterns ...</code></h3>

<p>Examines all defined variables which match the given patterns (defaults to <strong><code>*</code></strong>) and writes a tmake-compatible .conf file defining those variables. For example, if <strong><code>ABC</code></strong> is <strong><code>"3 monkeys"</code></strong> and <strong><code>ABC</code></strong> matches a pattern, then the file will include:</p>

<pre><code>define ABC {3 monkeys}
</code></pre>

<p>If the file would be unchanged, it is not written.</p>

<p>Typical usage is:</p>

<pre><code>make-tmake-settings [get-env BUILDDIR objdir]/settings.conf {[A-Z]*}
</code></pre>


        </div>
    </div>
    <div id="sidebar">
      <h2>About autosetup</h2>
      <ul>
        
            
            
              
            
            <li><a href="../../">Overview</a></li>
        
            
            
            <li><a href="../../news/">News</a></li>
        
            
            
            <li><a href="../../download/">Download</a></li>
        
            
            
            <li><a href="../../user/">Running autosetup</a></li>
        
            
            
            <li><a href="../">Developing</a></li>
        
            
            
            <li><a href="../examples/">Examples</a></li>
        
            
            
            <li><a href="../../license/">License</a></li>
        
            
            
            <li><a href="../../why/">Motivation</a></li>
        
      </ul>
      <h2>Community</h2>
      <ul>
        <li><a href="https://github.com/msteveb/autosetup">autosetup on github</a></li>
        <li><a href="https://github.com/msteveb/autosetup/commits/master">» commit history</a></li>
        <li><a href="https://github.com/msteveb/autosetup/issues">» open issues</a></li>
      </ul>
    </div>
    
    <script language="javascript">sh_highlightDocument();</script>
  

</body></html>